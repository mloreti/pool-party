(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{38:function(e,t,a){e.exports=a(72)},43:function(e,t,a){},45:function(e,t,a){},50:function(e,t,a){},67:function(e,t,a){},68:function(e,t,a){},69:function(e,t,a){},70:function(e,t,a){},71:function(e,t,a){},72:function(e,t,a){"use strict";a.r(t);var n,r=a(0),l=a.n(r),c=a(21),u=a.n(c),o=(a(43),a(23)),i=a.n(o),m=a(29),s=(a(45),a(14)),p=a(5),d=a(12),f=a(31),y=a.n(f).a.initializeApp({apiKey:"AIzaSyAyIdR5rJ6p-JX5BVMeoksBURFgAs5mD5U",authDomain:"pool-party-app.firebaseapp.com",databaseURL:"https://pool-party-app.firebaseio.com",projectId:"pool-party-app",storageBucket:"pool-party-app.appspot.com",messagingSenderId:"875916367186",appId:"1:875916367186:web:71a4c5d40ff62bda"}),E=a(4);!function(e){e.NOT_REQUESTED="NOT_REQUESTED",e.PENDING="PENDING",e.FULFILLED="FULFILLED"}(n||(n={}));a(50);var b=function(e){var t=e.status,a=e.players,c=e.fetchAllPlayers,u=Object(r.useState)(""),o=Object(d.a)(u,2),i=o[0],m=o[1];t===n.NOT_REQUESTED&&c();return l.a.createElement("div",{className:"Players"},l.a.createElement("h1",null,"Players"),l.a.createElement("input",{name:"name",value:i,onChange:function(e){m(e.currentTarget.value)},placeholder:"Player name"}),l.a.createElement("button",{onClick:function(){(function(e){var t=e.name,a=y.database().ref("players/").push();return a.set({id:a.key,name:t})})({name:i}).then(function(){c()}),m("")},disabled:i.length<1},"Add Player"),l.a.createElement("ul",null,a.map(function(e){var t=e.id,a=e.name;return l.a.createElement("li",{key:t},l.a.createElement(E.b,{to:"/players/".concat(t)},a))})))},v=a(26),h=a.n(v),g=a(33),I=function(e){return Object.keys(e).map(function(t){return e[t]})},O=function(e,t,a,n,r){return Object(g.getCubicRoots)(e,t,a,n-r)[0].real},S="PLAYERS.RECEIVE_ALL",j="PLAYERS.RECEIVE_PLAYER",N="PLAYERS.PENDING",P=function(){return function(e){y.database().ref("players").once("value").then(function(e){return e.val()}).then(function(t){e(w(t))})}},w=function(e){return{type:S,payload:e}},A=function(e){return function(t){t(T(e)),function(e){return y.database().ref("players/".concat(e)).once("value").then(function(e){return e.val()})}(e).then(function(e){t(G(e))})}},T=function(e){return{type:N,payload:e}},G=function(e){return{type:j,payload:e}},R=Object(p.b)(function(e){return{players:I(e.players.byId),status:e.players.status}},function(e){return{fetchAllPlayers:function(){return e(P())}}})(b);var D=function(){return l.a.createElement("h1",null,"Home")},L=function(e){var t=e.id,a=e.name,n=e.fetchPlayer,r=e.pending;return a||r||n(t),l.a.createElement(E.b,{to:"/players/".concat(t)},a)},k=function(e){var t,a=I(e.games.byId);return(t=12,function(e){return e.slice(e.length-t,e.length).reverse()})(a)},C=function(e){return I(e.games.byId)},U=function(e,t,a){return C(e).filter(function(e){return e.player1Id===t&&e.player2Id===a||e.player1Id===a&&e.player2Id===t})},x=function(e,t){return C(e).filter(function(e){return e.player1Id===t||e.player2Id===t})},F=function(e,t){var a=M(e,t);return a?a.name:null},M=function(e,t){return e.players.byId[t]},_=function(e,t){return e.players.pending[t]},Q=function(e,t,a){var n=U(e,t,a);return n.filter(function(e){return e.winnerId===t}).length/n.length},Y=function(e){var t,a=function(e){return I(e.players.byId)}(e),n=0;return I(a).forEach(function(e){e.ratingConfidence>n&&(n=e.ratingConfidence,t=e)}),t},B=function(e,t){var a=Y(e);if(a){if(a.id===t)return a.rating;var n=Q(e,t,a.id);return a.rating+function(e){var t=O(1.392724612439186e-9,-2904144213167561e-21,.002064097901975022,.4912753313135377,e);return Math.round(t)}(n)}},V=Object(p.b)(function(e,t){return{name:F(e,t.id),pending:_(e,t.id)}},function(e){return{fetchPlayer:function(t){return e(A(t))}}})(L),W=a(34),J=(a(67),function(e){var t=e.fetchAllPlayers,a=e.onAddGame,c=e.status,u=e.players,o=Object(r.useState)("Player 1"),i=Object(d.a)(o,2),m=i[0],s=i[1],p=Object(r.useState)("Player 2"),f=Object(d.a)(p,2),E=f[0],b=f[1],v=Object(r.useState)(0),h=Object(d.a)(v,2),g=h[0],I=h[1],O=Object(r.useState)(0),S=Object(d.a)(O,2),j=S[0],N=S[1];c===n.NOT_REQUESTED&&t();var P=function(e){e.currentTarget.setSelectionRange(0,e.currentTarget.value.length)},w="Player 1"!==m&&"Player 2"!==E?l.a.createElement("button",{className:"AddGame",onClick:function(){!function(e){var t=e.player1Id,a=e.player2Id,n=e.player1Score,r=e.player2Score,l=e.winnerId,c=y.database().ref("games/").push();c.set({time:W.database.ServerValue.TIMESTAMP,id:c.key,player1Id:t,player2Id:a,player1Score:n,player2Score:r,winnerId:l})}({player1Id:m,player2Id:E,player1Score:g,player2Score:j,winnerId:g>j?m:E}),I(0),N(0),s("Player 1"),b("Player 2"),a()}},"Add Game"):null;return l.a.createElement(l.a.Fragment,null,l.a.createElement("h2",null,"Add Game"),l.a.createElement("div",{className:"Forms"},l.a.createElement("div",null,l.a.createElement("h4",null,"Player 1"),l.a.createElement("form",null,l.a.createElement("select",{onChange:function(e){s(e.currentTarget.value)},value:m},l.a.createElement("option",{value:"Player 1",disabled:!0},"Select a player"),u.map(function(e){var t=e.id,a=e.name;return l.a.createElement("option",{key:t,value:t},a)})),l.a.createElement("label",null,"Score",l.a.createElement("input",{onClick:P,type:"text",pattern:"[0-9]*",value:g,min:0,max:17,onChange:function(e){return I(Number(e.currentTarget.value))}})))),l.a.createElement("div",null,l.a.createElement("h4",null,"Player 2"),l.a.createElement("form",null,l.a.createElement("select",{onChange:function(e){b(e.currentTarget.value)},value:E},l.a.createElement("option",{value:"Player 2",disabled:!0},"Select a player"),u.map(function(e){var t=e.id,a=e.name;return m!==t?l.a.createElement("option",{key:t,value:t},a):null})),l.a.createElement("label",null,"Score",l.a.createElement("input",{onClick:P,type:"text",pattern:"[0-9]*",value:j,min:0,max:17,onChange:function(e){return N(Number(e.currentTarget.value))}}))))),w)}),z=function(){return function(e){y.database().ref("games").once("value").then(function(e){return e.val()}).then(function(t){e(K(t))})}},H="GAMES.RECEIVE_ALL",K=function(e){return{type:H,payload:e}},X="GAMES.RECEIVE_N_GAMES",$=Object(p.b)(function(e){return{players:I(e.players.byId),status:e.players.status}},function(e){return{onAddGame:function(){return e(z())},fetchAllPlayers:function(){return e(P())}}})(J),q=(a(68),function(e){var t=e.date;return l.a.createElement("span",{style:{color:"silver",fontSize:"10px",fontWeight:"bold",textTransform:"uppercase",letterSpacing:"0.1px"}},function(e){var t=new Date(e);return h()(t).startOf().fromNow()}(t))}),Z=function(e,t){return"score"+(t===e?" winner":"")};var ee=function(e){return e.status===n.NOT_REQUESTED&&e.fetchAllGames(),l.a.createElement("div",{className:"Games"},l.a.createElement("h1",null,"Games"),l.a.createElement($,null),l.a.createElement("h2",null,"History"),l.a.createElement("ul",null,e.games.map(function(e){return l.a.createElement("li",{key:e.id,className:"Game"},l.a.createElement(E.b,{to:"/games/".concat(e.id)},l.a.createElement(q,{date:e.time})),l.a.createElement("div",null,l.a.createElement("div",{className:Z(e.player1Id,e.winnerId)},l.a.createElement(V,{id:e.player1Id})," ",e.player1Score),l.a.createElement("div",{className:Z(e.player2Id,e.winnerId)},l.a.createElement(V,{id:e.player2Id})," ",e.player2Score)))})))},te=Object(p.b)(function(e){return{games:k(e),status:e.games.status}},function(e){return{fetchAllGames:function(){return e(z())}}})(ee),ae=(a(69),function(e){var t=e.winRate,a=e.totalGames;return l.a.createElement("span",null,t,"% (",a,")")}),ne=Object(p.b)(function(e,t){var a=t.player1Id,n=t.player2Id,r=U(e,a,n),l=r.filter(function(e){return e.winnerId===a});return{winRate:Math.round(l.length/r.length*100),totalGames:r.length}})(ae),re=function(e){var t=e.id,a=e.name,n=e.rating,r=e.opponentStats,c=e.gamesPlayed;return a?l.a.createElement("div",{className:"PlayerProfile"},l.a.createElement("h1",null,a," - ",n),l.a.createElement("h2",null,"Win Rates"),l.a.createElement("div",null,r.map(function(e){return l.a.createElement("div",{className:"opponent",key:e.opponent.id},l.a.createElement(V,{id:e.opponent.id})," - ",l.a.createElement(ne,{player1Id:t,player2Id:e.opponent.id}))})),l.a.createElement("h2",null,"Games Played"),l.a.createElement("div",{className:"PlayerGames"},c.map(function(e){return l.a.createElement("div",{className:"PlayerGame",key:e.id},l.a.createElement(E.b,{to:"/games/".concat(e.id)},l.a.createElement(q,{date:e.time})),l.a.createElement("div",{className:"Content"},l.a.createElement("div",{className:"opponent"},"Opponent:"," ",e.player1Id===t?l.a.createElement(V,{id:e.player2Id}):l.a.createElement(V,{id:e.player1Id})),l.a.createElement("div",{className:"score"},e.winnerId===t?"\u2705":"\u274c",e.player1Score," - ",e.player2Score)))}))):null},le=Object(p.b)(function(e,t){var a=t.match;if(e.players.status===n.NOT_REQUESTED)return{};var r=a.params.id,l=M(e,r),c=B(e,r)||0,u=x(e,r),o=function(e,t){var a=[];return x(e,t).forEach(function(e){var n=function(e,t){return t.player1Id===e?t.player2Id:t.player1Id}(t,e);a.indexOf(n)<0&&a.push(n)}),a}(e,r).map(function(t){return{opponent:M(e,t),winRate:Q(e,r,t)}});return{id:r,name:l.name,rating:c,ratingConfidence:l.ratingConfidence,gamesPlayed:u,opponentStats:o}})(re),ce=(a(70),function(e){var t=e.match,a=e.history,n=t.params.id,c=Object(r.useState)(),u=Object(d.a)(c,2),o=u[0],i=u[1];if(Object(r.useEffect)(function(){var e;(e=n,y.database().ref("games/".concat(e)).once("value").then(function(e){return e.val()})).then(function(e){i(e)})},[n]),!o)return null;var m=function(e){window.confirm("Delete Game?")&&function(e){return y.database().ref("games/".concat(e)).remove()}(e).then(function(){a.push("/games")})};return l.a.createElement("div",{className:"Game"},l.a.createElement("h1",null,"Game"),l.a.createElement("h4",{style:{marginBottom:10}},function(e){var t=new Date(e);return h()(t).format("MMMM Do, YYYY - h:mm a")}(o.time)),l.a.createElement("div",{style:{marginBottom:20}},l.a.createElement("span",{className:"remove",onClick:function(){return m(o.id)}},"Delete Game")),l.a.createElement(V,{id:o.player1Id}),l.a.createElement("h1",null,o.player1Score),l.a.createElement(V,{id:o.player2Id}),l.a.createElement("h1",null,o.player2Score))});var ue=function(){return l.a.createElement(s.d,null,l.a.createElement(s.b,{exact:!0,path:"/",component:D}),l.a.createElement(s.b,{exact:!0,path:"/players",component:R}),l.a.createElement(s.b,{path:"/players/:id",component:le}),l.a.createElement(s.b,{exact:!0,path:"/games",component:te}),l.a.createElement(s.b,{path:"/games/:id",component:ce}),l.a.createElement(s.a,{to:"/"}))};a(71);var oe=function(){return l.a.createElement("nav",{className:"Nav"},l.a.createElement("ul",null,l.a.createElement("li",null,l.a.createElement(E.b,{to:"/"},"Home")),l.a.createElement("li",null,l.a.createElement(E.b,{to:"/games"},"Games")),l.a.createElement("li",null,l.a.createElement(E.b,{to:"/players"},"Players"))))},ie=a(13),me=a(36),se=a(6),pe={status:n.NOT_REQUESTED,byId:{},pending:{}};var de=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:pe,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case X:return Object(se.a)({},e,{byId:Object(se.a)({},e.byId,t.payload),status:n.FULFILLED});case H:return Object(se.a)({},e,{byId:Object(se.a)({},t.payload),status:n.FULFILLED});default:return e}},fe=a(17),ye={status:n.NOT_REQUESTED,byId:{},pending:{}};var Ee=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ye,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case N:return Object(se.a)({},e,{pending:Object(se.a)({},e.pending,Object(fe.a)({},t.payload,!0))});case S:return Object(se.a)({},e,{byId:Object(se.a)({},t.payload),status:n.FULFILLED});case j:return Object(se.a)({},e,{pending:Object(se.a)({},e.pending,Object(fe.a)({},t.payload.id,!1)),byId:Object(se.a)({},e.byId,Object(fe.a)({},t.payload.id,Object(se.a)({},t.payload)))});default:return e}},be=Object(ie.combineReducers)({games:de,players:Ee}),ve=a(37),he=function(e){return Object(ie.createStore)(be,e,Object(ve.composeWithDevTools)(Object(ie.applyMiddleware)(me.a)))}({}),ge=function(){var e=Object(m.a)(i.a.mark(function e(){return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:he.dispatch(z()),he.dispatch(P());case 2:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}();var Ie=function(){return ge(),l.a.createElement(p.a,{store:he},l.a.createElement(E.a,{basename:"/pool-party"},l.a.createElement("div",{className:"App"},l.a.createElement(oe,null),l.a.createElement(ue,null))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));u.a.render(l.a.createElement(Ie,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[38,1,2]]]);
//# sourceMappingURL=main.9a2f0116.chunk.js.map