(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{36:function(e,t,a){e.exports=a(69)},41:function(e,t,a){},42:function(e,t,a){},47:function(e,t,a){},64:function(e,t,a){},65:function(e,t,a){},66:function(e,t,a){},67:function(e,t,a){},68:function(e,t,a){},69:function(e,t,a){"use strict";a.r(t);var n,r=a(0),l=a.n(r),c=a(21),u=a.n(c),o=(a(41),a(42),a(14)),i=a(5),m=a(12),s=a(29),p=a.n(s).a.initializeApp({apiKey:"AIzaSyAyIdR5rJ6p-JX5BVMeoksBURFgAs5mD5U",authDomain:"pool-party-app.firebaseapp.com",databaseURL:"https://pool-party-app.firebaseio.com",projectId:"pool-party-app",storageBucket:"pool-party-app.appspot.com",messagingSenderId:"875916367186",appId:"1:875916367186:web:71a4c5d40ff62bda"}),d=a(4);!function(e){e.NOT_REQUESTED="NOT_REQUESTED",e.PENDING="PENDING",e.FULFILLED="FULFILLED"}(n||(n={}));a(47);var f=function(e){var t=e.status,a=e.players,c=e.fetchAllPlayers,u=Object(r.useState)(""),o=Object(m.a)(u,2),i=o[0],s=o[1];t===n.NOT_REQUESTED&&c();return l.a.createElement("div",{className:"Players"},l.a.createElement("h1",null,"Players"),l.a.createElement("input",{name:"name",value:i,onChange:function(e){s(e.currentTarget.value)},placeholder:"Player name"}),l.a.createElement("button",{onClick:function(){(function(e){var t=e.name,a=p.database().ref("players/").push();return a.set({id:a.key,name:t})})({name:i}).then(function(){c()}),s("")},disabled:i.length<1},"Add Player"),l.a.createElement("ul",null,a.map(function(e){var t=e.id,a=e.name;return l.a.createElement("li",{key:t},l.a.createElement(d.b,{to:"/players/".concat(t)},a))})))},y=a(25),E=a.n(y),b=a(31),v=function(e){return Object.keys(e).map(function(t){return e[t]})},h=function(e,t,a,n,r){return Object(b.getCubicRoots)(e,t,a,n-r)[0].real},g="PLAYERS.RECEIVE_ALL",I="PLAYERS.RECEIVE_PLAYER",O="PLAYERS.PENDING",S=function(){return function(e){p.database().ref("players").once("value").then(function(e){return e.val()}).then(function(t){e(j(t))})}},j=function(e){return{type:g,payload:e}},N=function(e){return function(t){t(P(e)),function(e){return p.database().ref("players/".concat(e)).once("value").then(function(e){return e.val()})}(e).then(function(e){t(w(e))})}},P=function(e){return{type:O,payload:e}},w=function(e){return{type:I,payload:e}},A=Object(i.b)(function(e){return{players:v(e.players.byId),status:e.players.status}},function(e){return{fetchAllPlayers:function(){return e(S())}}})(f);var G=function(){return l.a.createElement("h1",null,"Home")},R=function(e){var t=e.id,a=e.name,n=e.fetchPlayer,r=e.pending;return a||r||n(t),l.a.createElement(d.b,{to:"/players/".concat(t)},a)},T=function(e){var t,a=v(e.games.byId);return(t=12,function(e){return e.slice(e.length-t,e.length).reverse()})(a)},L=function(e){return v(e.games.byId)},D=function(e,t,a){return L(e).filter(function(e){return e.player1Id===t&&e.player2Id===a||e.player1Id===a&&e.player2Id===t})},k=function(e,t){return L(e).filter(function(e){return e.player1Id===t||e.player2Id===t})},C=function(e,t){var a=U(e,t);return a?a.name:null},U=function(e,t){return e.players.byId[t]},F=function(e,t){return e.players.pending[t]},M=function(e,t,a){var n=D(e,t,a);return n.filter(function(e){return e.winnerId===t}).length/n.length},x=function(e){var t,a=function(e){return v(e.players.byId)}(e),n=0;return v(a).forEach(function(e){e.ratingConfidence>n&&(n=e.ratingConfidence,t=e)}),t},_=function(e,t){var a=x(e);if(a){if(a.id===t)return a.rating;var n=M(e,t,a.id);return a.rating+function(e){var t=h(1.392724612439186e-9,-2904144213167561e-21,.002064097901975022,.4912753313135377,e);return Math.round(t)}(n)}},Y=Object(i.b)(function(e,t){return{name:C(e,t.id),pending:F(e,t.id)}},function(e){return{fetchPlayer:function(t){return e(N(t))}}})(R),B=a(32),Q=(a(64),function(e){var t=e.fetchAllPlayers,a=e.onAddGame,c=e.status,u=e.players,o=Object(r.useState)("Player 1"),i=Object(m.a)(o,2),s=i[0],d=i[1],f=Object(r.useState)("Player 2"),y=Object(m.a)(f,2),E=y[0],b=y[1],v=Object(r.useState)(0),h=Object(m.a)(v,2),g=h[0],I=h[1],O=Object(r.useState)(0),S=Object(m.a)(O,2),j=S[0],N=S[1];c===n.NOT_REQUESTED&&t();var P=function(e){e.currentTarget.setSelectionRange(0,e.currentTarget.value.length)},w="Player 1"!==s&&"Player 2"!==E?l.a.createElement("button",{className:"AddGame",onClick:function(){!function(e){var t=e.player1Id,a=e.player2Id,n=e.player1Score,r=e.player2Score,l=e.winnerId,c=p.database().ref("games/").push();c.set({time:B.database.ServerValue.TIMESTAMP,id:c.key,player1Id:t,player2Id:a,player1Score:n,player2Score:r,winnerId:l})}({player1Id:s,player2Id:E,player1Score:g,player2Score:j,winnerId:g>j?s:E}),I(0),N(0),d("Player 1"),b("Player 2"),a()}},"Add Game"):null;return l.a.createElement(l.a.Fragment,null,l.a.createElement("h2",null,"Add Game"),l.a.createElement("div",{className:"Forms"},l.a.createElement("div",null,l.a.createElement("h4",null,"Player 1"),l.a.createElement("form",null,l.a.createElement("select",{onChange:function(e){d(e.currentTarget.value)},value:s},l.a.createElement("option",{value:"Player 1",disabled:!0},"Select a player"),u.map(function(e){var t=e.id,a=e.name;return l.a.createElement("option",{key:t,value:t},a)})),l.a.createElement("label",null,"Score",l.a.createElement("input",{onClick:P,type:"text",pattern:"[0-9]*",value:g,min:0,max:17,onChange:function(e){return I(Number(e.currentTarget.value))}})))),l.a.createElement("div",null,l.a.createElement("h4",null,"Player 2"),l.a.createElement("form",null,l.a.createElement("select",{onChange:function(e){b(e.currentTarget.value)},value:E},l.a.createElement("option",{value:"Player 2",disabled:!0},"Select a player"),u.map(function(e){var t=e.id,a=e.name;return s!==t?l.a.createElement("option",{key:t,value:t},a):null})),l.a.createElement("label",null,"Score",l.a.createElement("input",{onClick:P,type:"text",pattern:"[0-9]*",value:j,min:0,max:17,onChange:function(e){return N(Number(e.currentTarget.value))}}))))),w)}),V=function(){return function(e){p.database().ref("games").once("value").then(function(e){return e.val()}).then(function(t){e(J(t))})}},W="GAMES.RECEIVE_ALL",J=function(e){return{type:W,payload:e}},z="GAMES.RECEIVE_N_GAMES",H=Object(i.b)(function(e){return{players:v(e.players.byId),status:e.players.status}},function(e){return{onAddGame:function(){return e(V())},fetchAllPlayers:function(){return e(S())}}})(Q),K=(a(65),function(e){var t=e.date;return l.a.createElement("span",{style:{color:"silver",fontSize:"10px",fontWeight:"bold",textTransform:"uppercase",letterSpacing:"0.1px"}},function(e){var t=new Date(e);return E()(t).startOf().fromNow()}(t))}),X=function(e,t){return"score"+(t===e?" winner":"")};var $=function(e){return e.status===n.NOT_REQUESTED&&e.fetchAllGames(),l.a.createElement("div",{className:"Games"},l.a.createElement("h1",null,"Games"),l.a.createElement(H,null),l.a.createElement("h2",null,"History"),l.a.createElement("ul",null,e.games.map(function(e){return l.a.createElement("li",{key:e.id,className:"Game"},l.a.createElement(d.b,{to:"/games/".concat(e.id)},l.a.createElement(K,{date:e.time})),l.a.createElement("div",null,l.a.createElement("div",{className:X(e.player1Id,e.winnerId)},l.a.createElement(Y,{id:e.player1Id})," ",e.player1Score),l.a.createElement("div",{className:X(e.player2Id,e.winnerId)},l.a.createElement(Y,{id:e.player2Id})," ",e.player2Score)))})))},q=Object(i.b)(function(e){return{games:T(e),status:e.games.status}},function(e){return{fetchAllGames:function(){return e(V())}}})($),Z=(a(66),function(e){var t=e.winRate,a=e.totalGames;return l.a.createElement("span",null,t,"% (",a,")")}),ee=Object(i.b)(function(e,t){var a=t.player1Id,n=t.player2Id,r=D(e,a,n),l=r.filter(function(e){return e.winnerId===a});return{winRate:Math.round(l.length/r.length*100),totalGames:r.length}})(Z),te=function(e){var t=e.id,a=e.name,n=e.rating,r=e.opponentStats,c=e.gamesPlayed;return l.a.createElement("div",{className:"PlayerProfile"},l.a.createElement("h1",null,a," - ",n),l.a.createElement("h2",null,"Win Rates"),l.a.createElement("div",null,r.map(function(e){return l.a.createElement("div",{className:"opponent",key:e.opponent.id},l.a.createElement(Y,{id:e.opponent.id})," - ",l.a.createElement(ee,{player1Id:t,player2Id:e.opponent.id}))})),l.a.createElement("h2",null,"Games Played"),l.a.createElement("div",{className:"PlayerGames"},c.map(function(e){return l.a.createElement("div",{className:"PlayerGame",key:e.id},l.a.createElement(d.b,{to:"/games/".concat(e.id)},l.a.createElement(K,{date:e.time})),l.a.createElement("div",{className:"Content"},l.a.createElement("div",{className:"opponent"},"Opponent:"," ",e.player1Id===t?l.a.createElement(Y,{id:e.player2Id}):l.a.createElement(Y,{id:e.player1Id})),l.a.createElement("div",{className:"score"},e.winnerId===t?"\u2705":"\u274c",e.player1Score," - ",e.player2Score)))})))},ae=Object(i.b)(function(e,t){var a=t.match.params.id,n=U(e,a),r=_(e,a)||0,l=k(e,a),c=function(e,t){var a=[];return k(e,t).forEach(function(e){var n=function(e,t){return t.player1Id===e?t.player2Id:t.player1Id}(t,e);a.indexOf(n)<0&&a.push(n)}),a}(e,a).map(function(t){return{opponent:U(e,t),winRate:M(e,a,t)}});return{id:a,name:n.name,rating:r,ratingConfidence:n.ratingConfidence,gamesPlayed:l,opponentStats:c}})(te),ne=(a(67),function(e){var t=e.match,a=e.history,n=t.params.id,c=Object(r.useState)(),u=Object(m.a)(c,2),o=u[0],i=u[1];if(Object(r.useEffect)(function(){var e;(e=n,p.database().ref("games/".concat(e)).once("value").then(function(e){return e.val()})).then(function(e){i(e)})},[n]),!o)return null;var s=function(e){window.confirm("Delete Game?")&&function(e){return p.database().ref("games/".concat(e)).remove()}(e).then(function(){a.push("/games")})};return l.a.createElement("div",{className:"Game"},l.a.createElement("h1",null,"Game"),l.a.createElement("h4",{style:{marginBottom:10}},function(e){var t=new Date(e);return E()(t).format("MMMM Do, YYYY - h:mm a")}(o.time)),l.a.createElement("div",{style:{marginBottom:20}},l.a.createElement("span",{className:"remove",onClick:function(){return s(o.id)}},"Delete Game")),l.a.createElement(Y,{id:o.player1Id}),l.a.createElement("h1",null,o.player1Score),l.a.createElement(Y,{id:o.player2Id}),l.a.createElement("h1",null,o.player2Score))});var re=function(){return l.a.createElement(o.d,null,l.a.createElement(o.b,{exact:!0,path:"/",component:G}),l.a.createElement(o.b,{exact:!0,path:"/players",component:A}),l.a.createElement(o.b,{path:"/players/:id",component:ae}),l.a.createElement(o.b,{exact:!0,path:"/games",component:q}),l.a.createElement(o.b,{path:"/games/:id",component:ne}),l.a.createElement(o.a,{to:"/"}))};a(68);var le=function(){return l.a.createElement("nav",{className:"Nav"},l.a.createElement("ul",null,l.a.createElement("li",null,l.a.createElement(d.b,{to:"/"},"Home")),l.a.createElement("li",null,l.a.createElement(d.b,{to:"/games"},"Games")),l.a.createElement("li",null,l.a.createElement(d.b,{to:"/players"},"Players"))))},ce=a(13),ue=a(34),oe=a(6),ie={status:n.NOT_REQUESTED,byId:{},pending:{}};var me=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ie,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case z:return Object(oe.a)({},e,{byId:Object(oe.a)({},e.byId,t.payload),status:n.FULFILLED});case W:return Object(oe.a)({},e,{byId:Object(oe.a)({},t.payload),status:n.FULFILLED});default:return e}},se=a(17),pe={status:n.NOT_REQUESTED,byId:{},pending:{}};var de=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:pe,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case O:return Object(oe.a)({},e,{pending:Object(oe.a)({},e.pending,Object(se.a)({},t.payload,!0))});case g:return Object(oe.a)({},e,{byId:Object(oe.a)({},t.payload),status:n.FULFILLED});case I:return Object(oe.a)({},e,{pending:Object(oe.a)({},e.pending,Object(se.a)({},t.payload.id,!1)),byId:Object(oe.a)({},e.byId,Object(se.a)({},t.payload.id,Object(oe.a)({},t.payload)))});default:return e}},fe=Object(ce.combineReducers)({games:me,players:de}),ye=a(35),Ee=function(e){return Object(ce.createStore)(fe,e,Object(ye.composeWithDevTools)(Object(ce.applyMiddleware)(ue.a)))}({});var be=function(){return l.a.createElement(i.a,{store:Ee},l.a.createElement(d.a,{basename:"/pool-party"},l.a.createElement("div",{className:"App"},l.a.createElement(le,null),l.a.createElement(re,null))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));u.a.render(l.a.createElement(be,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[36,1,2]]]);
//# sourceMappingURL=main.8ef0ff9e.chunk.js.map