(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{53:function(e,t,a){e.exports=a(90)},58:function(e,t,a){},60:function(e,t,a){},65:function(e,t,a){},82:function(e,t,a){},83:function(e,t,a){},84:function(e,t,a){},88:function(e,t,a){},89:function(e,t,a){},90:function(e,t,a){"use strict";a.r(t);var n,r=a(0),l=a.n(r),c=a(29),u=a.n(c),o=(a(58),a(33)),i=a.n(o),m=a(39),s=(a(60),a(21)),p=a(6),d=a(15),f=a(41),E=a.n(f).a.initializeApp({apiKey:"AIzaSyAyIdR5rJ6p-JX5BVMeoksBURFgAs5mD5U",authDomain:"pool-party-app.firebaseapp.com",databaseURL:"https://pool-party-app.firebaseio.com",projectId:"pool-party-app",storageBucket:"pool-party-app.appspot.com",messagingSenderId:"875916367186",appId:"1:875916367186:web:71a4c5d40ff62bda"});!function(e){e.NOT_REQUESTED="NOT_REQUESTED",e.PENDING="PENDING",e.FULFILLED="FULFILLED"}(n||(n={}));a(65);var y=a(10),v=function(e){var t=e.id,a=e.name,n=e.fetchPlayer,r=e.pending,c=e.useInitials,u=void 0!==c&&c,o=a;return a||r||n(t),u&&(o=function(e){if(!e)return"??";var t=e.match(/\b\w/g)||[];return((t.shift()||"")+(t.pop()||"")).toUpperCase()}(a)),l.a.createElement(y.b,{to:"/players/".concat(t)},o)},b="PLAYERS.RECEIVE_ALL",h="PLAYERS.RECEIVE_PLAYER",g="PLAYERS.PENDING",I=function(){return function(e){E.database().ref("players").once("value").then(function(e){return e.val()}).then(function(t){e(O(t))})}},O=function(e){return{type:b,payload:e}},S=function(e){return function(t){t(j(e)),function(e){return E.database().ref("players/".concat(e)).once("value").then(function(e){return e.val()})}(e).then(function(e){t(N(e))})}},j=function(e){return{type:g,payload:e}},N=function(e){return{type:h,payload:e}},w=a(36),P=a.n(w),A=a(43),T=function(e){return Object.keys(e).map(function(t){return e[t]})},G=function(e,t,a,n,r){return Object(A.getCubicRoots)(e,t,a,n-r)[0].real},R=function(e){var t,a=T(e.games.byId);return(t=12,function(e){return e.slice(e.length-t,e.length).reverse()})(a)},D=function(e){return T(e.games.byId)},L=function(e,t,a){return D(e).filter(function(e){return e.player1Id===t&&e.player2Id===a||e.player1Id===a&&e.player2Id===t})},k=function(e,t){return D(e).filter(function(e){return e.player1Id===t||e.player2Id===t})},C=function(e,t){var a=U(e,t);return a?a.name:null},U=function(e,t){return e.players.byId[t]},F=function(e,t){return e.players.pending[t]},x=function(e,t,a){var n=L(e,t,a);return n.filter(function(e){return e.winnerId===t}).length/n.length},M=function(e){var t,a=function(e){return T(e.players.byId)}(e),n=0;return T(a).forEach(function(e){e.ratingConfidence>n&&(n=e.ratingConfidence,t=e)}),t},_=function(e,t){var a=M(e);if(a){if(a.id===t)return a.rating;var n=x(e,t,a.id);return a.rating+function(e){var t=G(1.392724612439186e-9,-2904144213167561e-21,.002064097901975022,.4912753313135377,e);return Math.round(t)}(n)}},Q=Object(p.b)(function(e,t){return{name:C(e,t.id),pending:F(e,t.id)}},function(e){return{fetchPlayer:function(t){return e(S(t))}}})(v),Y=function(e){e.id;var t=e.rating;return l.a.createElement(l.a.Fragment,null,t)},B=Object(p.b)(function(e,t){return{rating:_(e,t.id)||0}})(Y),V=function(e){var t=e.status,a=e.players,c=e.fetchAllPlayers,u=Object(r.useState)(""),o=Object(d.a)(u,2),i=o[0],m=o[1];t===n.NOT_REQUESTED&&c();return l.a.createElement("div",{className:"Players"},l.a.createElement("h1",null,"Players"),l.a.createElement("input",{name:"name",value:i,onChange:function(e){m(e.currentTarget.value)},placeholder:"Player name"}),l.a.createElement("button",{onClick:function(){(function(e){var t=e.name,a=E.database().ref("players/").push();return a.set({id:a.key,name:t})})({name:i}).then(function(){c()}),m("")},disabled:i.length<1},"Add Player"),l.a.createElement("ul",null,a.map(function(e){var t=e.id;return l.a.createElement("li",{key:t},l.a.createElement(Q,{id:t})," (",l.a.createElement(B,{id:t}),")")})))},W=Object(p.b)(function(e){return{players:T(e.players.byId),status:e.players.status}},function(e){return{fetchAllPlayers:function(){return e(I())}}})(V);var J=function(){return l.a.createElement("h1",null,"Home")},z=a(44),H=(a(82),function(e){var t=e.fetchAllPlayers,a=e.onAddGame,c=e.status,u=e.players,o=Object(r.useState)("Player 1"),i=Object(d.a)(o,2),m=i[0],s=i[1],p=Object(r.useState)("Player 2"),f=Object(d.a)(p,2),y=f[0],v=f[1],b=Object(r.useState)(0),h=Object(d.a)(b,2),g=h[0],I=h[1],O=Object(r.useState)(0),S=Object(d.a)(O,2),j=S[0],N=S[1];c===n.NOT_REQUESTED&&t();var w=function(e){e.currentTarget.setSelectionRange(0,e.currentTarget.value.length)},P="Player 1"!==m&&"Player 2"!==y?l.a.createElement("button",{className:"AddGame",onClick:function(){!function(e){var t=e.player1Id,a=e.player2Id,n=e.player1Score,r=e.player2Score,l=e.winnerId,c=E.database().ref("games/").push();c.set({time:z.database.ServerValue.TIMESTAMP,id:c.key,player1Id:t,player2Id:a,player1Score:n,player2Score:r,winnerId:l})}({player1Id:m,player2Id:y,player1Score:g,player2Score:j,winnerId:g>j?m:y}),I(0),N(0),s("Player 1"),v("Player 2"),a()}},"Add Game"):null;return l.a.createElement(l.a.Fragment,null,l.a.createElement("h2",null,"Add Game"),l.a.createElement("div",{className:"Forms"},l.a.createElement("div",null,l.a.createElement("h4",null,"Player 1"),l.a.createElement("form",null,l.a.createElement("select",{onChange:function(e){s(e.currentTarget.value)},value:m},l.a.createElement("option",{value:"Player 1",disabled:!0},"Select a player"),u.map(function(e){var t=e.id,a=e.name;return l.a.createElement("option",{key:t,value:t},a)})),l.a.createElement("label",null,"Score",l.a.createElement("input",{onClick:w,type:"text",pattern:"[0-9]*",value:g,min:0,max:17,onChange:function(e){return I(Number(e.currentTarget.value))}})))),l.a.createElement("div",null,l.a.createElement("h4",null,"Player 2"),l.a.createElement("form",null,l.a.createElement("select",{onChange:function(e){v(e.currentTarget.value)},value:y},l.a.createElement("option",{value:"Player 2",disabled:!0},"Select a player"),u.map(function(e){var t=e.id,a=e.name;return m!==t?l.a.createElement("option",{key:t,value:t},a):null})),l.a.createElement("label",null,"Score",l.a.createElement("input",{onClick:w,type:"text",pattern:"[0-9]*",value:j,min:0,max:17,onChange:function(e){return N(Number(e.currentTarget.value))}}))))),P)}),K=function(){return function(e){E.database().ref("games").once("value").then(function(e){return e.val()}).then(function(t){e($(t))})}},X="GAMES.RECEIVE_ALL",$=function(e){return{type:X,payload:e}},q="GAMES.RECEIVE_N_GAMES",Z=Object(p.b)(function(e){return{players:T(e.players.byId),status:e.players.status}},function(e){return{onAddGame:function(){return e(K())},fetchAllPlayers:function(){return e(I())}}})(H),ee=(a(83),function(e){var t=e.date;return l.a.createElement("span",{style:{color:"silver",fontSize:"10px",fontWeight:"bold",textTransform:"uppercase",letterSpacing:"0.1px"}},function(e){var t=new Date(e);return P()(t).startOf().fromNow()}(t))}),te=function(e,t){return"score"+(t===e?" winner":"")};var ae=function(e){return e.status===n.NOT_REQUESTED&&e.fetchAllGames(),l.a.createElement("div",{className:"Games"},l.a.createElement("h1",null,"Games"),l.a.createElement(Z,null),l.a.createElement("h2",null,"History"),l.a.createElement("ul",null,e.games.map(function(e){return l.a.createElement("li",{key:e.id,className:"Game"},l.a.createElement(y.b,{to:"/games/".concat(e.id)},l.a.createElement(ee,{date:e.time})),l.a.createElement("div",null,l.a.createElement("div",{className:te(e.player1Id,e.winnerId)},l.a.createElement(Q,{id:e.player1Id})," ",e.player1Score),l.a.createElement("div",{className:te(e.player2Id,e.winnerId)},l.a.createElement(Q,{id:e.player2Id})," ",e.player2Score)))})))},ne=Object(p.b)(function(e){return{games:R(e),status:e.games.status}},function(e){return{fetchAllGames:function(){return e(K())}}})(ae),re=(a(84),function(e){var t=e.winRate,a=e.totalGames;return l.a.createElement("span",null,t,"% (",a,")")}),le=Object(p.b)(function(e,t){var a=t.player1Id,n=t.player2Id,r=L(e,a,n),l=r.filter(function(e){return e.winnerId===a});return{winRate:Math.round(l.length/r.length*100),totalGames:r.length}})(re),ce=a(100),ue=a(101),oe=a(47),ie=a.n(oe),me=a(48),se=a.n(me),pe=Object(ce.a)({avatar:{margin:10},orangeAvatar:{margin:10,color:"#fff",backgroundColor:ie.a[500]},purpleAvatar:{margin:10,color:"#fff",backgroundColor:se.a[500]}}),de=function(e){var t=e.id,a=e.name,n=e.opponentStats,r=e.gamesPlayed,c=pe();return a?l.a.createElement("div",{className:"PlayerProfile"},l.a.createElement("h1",null,l.a.createElement(ue.a,{className:c.orangeAvatar},l.a.createElement(Q,{id:t,useInitials:!0}))," ",l.a.createElement(Q,{id:t})," - ",l.a.createElement(B,{id:t})),l.a.createElement("h2",null,"Win Rates"),l.a.createElement("div",null,n.map(function(e){return l.a.createElement("div",{className:"opponent",key:e.opponent.id},l.a.createElement(Q,{id:e.opponent.id})," - ",l.a.createElement(le,{player1Id:t,player2Id:e.opponent.id}))})),l.a.createElement("h2",null,"Games Played"),l.a.createElement("div",{className:"PlayerGames"},r.map(function(e){return l.a.createElement("div",{className:"PlayerGame",key:e.id},l.a.createElement(y.b,{to:"/games/".concat(e.id)},l.a.createElement(ee,{date:e.time})),l.a.createElement("div",{className:"Content"},l.a.createElement("div",{className:"opponent"},"Opponent:"," ",e.player1Id===t?l.a.createElement(Q,{id:e.player2Id}):l.a.createElement(Q,{id:e.player1Id})),l.a.createElement("div",{className:"score"},e.winnerId===t?"\u2705":"\u274c",e.player1Score," - ",e.player2Score)))}))):null},fe=Object(p.b)(function(e,t){var a=t.match;if(e.players.status===n.NOT_REQUESTED)return{};var r=a.params.id,l=U(e,r),c=k(e,r),u=function(e,t){var a=[];return k(e,t).forEach(function(e){var n=function(e,t){return t.player1Id===e?t.player2Id:t.player1Id}(t,e);a.indexOf(n)<0&&a.push(n)}),a}(e,r).map(function(t){return{opponent:U(e,t),winRate:x(e,r,t)}});return{id:r,name:l.name,ratingConfidence:l.ratingConfidence,gamesPlayed:c,opponentStats:u}})(de),Ee=(a(88),function(e){var t=e.match,a=e.history,n=t.params.id,c=Object(r.useState)(),u=Object(d.a)(c,2),o=u[0],i=u[1];if(Object(r.useEffect)(function(){var e;(e=n,E.database().ref("games/".concat(e)).once("value").then(function(e){return e.val()})).then(function(e){i(e)})},[n]),!o)return null;var m=function(e){window.confirm("Delete Game?")&&function(e){return E.database().ref("games/".concat(e)).remove()}(e).then(function(){a.push("/games")})};return l.a.createElement("div",{className:"Game"},l.a.createElement("h1",null,"Game"),l.a.createElement("h4",{style:{marginBottom:10}},function(e){var t=new Date(e);return P()(t).format("MMMM Do, YYYY - h:mm a")}(o.time)),l.a.createElement("div",{style:{marginBottom:20}},l.a.createElement("span",{className:"remove",onClick:function(){return m(o.id)}},"Delete Game")),l.a.createElement(Q,{id:o.player1Id}),l.a.createElement("h1",null,o.player1Score),l.a.createElement(Q,{id:o.player2Id}),l.a.createElement("h1",null,o.player2Score))});var ye=function(){return l.a.createElement(s.d,null,l.a.createElement(s.b,{exact:!0,path:"/",component:J}),l.a.createElement(s.b,{exact:!0,path:"/players",component:W}),l.a.createElement(s.b,{path:"/players/:id",component:fe}),l.a.createElement(s.b,{exact:!0,path:"/games",component:ne}),l.a.createElement(s.b,{path:"/games/:id",component:Ee}),l.a.createElement(s.a,{to:"/"}))};a(89);var ve=function(){return l.a.createElement("nav",{className:"Nav"},l.a.createElement("ul",null,l.a.createElement("li",null,l.a.createElement(y.b,{to:"/"},"Home")),l.a.createElement("li",null,l.a.createElement(y.b,{to:"/games"},"Games")),l.a.createElement("li",null,l.a.createElement(y.b,{to:"/players"},"Players"))))},be=a(16),he=a(49),ge=a(8),Ie={status:n.NOT_REQUESTED,byId:{},pending:{}};var Oe=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ie,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case q:return Object(ge.a)({},e,{byId:Object(ge.a)({},e.byId,t.payload),status:n.FULFILLED});case X:return Object(ge.a)({},e,{byId:Object(ge.a)({},t.payload),status:n.FULFILLED});default:return e}},Se=a(23),je={status:n.NOT_REQUESTED,byId:{},pending:{}};var Ne=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:je,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case g:return Object(ge.a)({},e,{pending:Object(ge.a)({},e.pending,Object(Se.a)({},t.payload,!0))});case b:return Object(ge.a)({},e,{byId:Object(ge.a)({},t.payload),status:n.FULFILLED});case h:return Object(ge.a)({},e,{pending:Object(ge.a)({},e.pending,Object(Se.a)({},t.payload.id,!1)),byId:Object(ge.a)({},e.byId,Object(Se.a)({},t.payload.id,Object(ge.a)({},t.payload)))});default:return e}},we=Object(be.combineReducers)({games:Oe,players:Ne}),Pe=a(50),Ae=function(e){return Object(be.createStore)(we,e,Object(Pe.composeWithDevTools)(Object(be.applyMiddleware)(he.a)))}({}),Te=function(){var e=Object(m.a)(i.a.mark(function e(){return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:Ae.dispatch(K()),Ae.dispatch(I());case 2:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}();var Ge=function(){return Te(),l.a.createElement(p.a,{store:Ae},l.a.createElement(y.a,{basename:"/pool-party"},l.a.createElement("div",{className:"App"},l.a.createElement(ve,null),l.a.createElement(ye,null))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));u.a.render(l.a.createElement(Ge,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[53,1,2]]]);
//# sourceMappingURL=main.8c73bfb1.chunk.js.map