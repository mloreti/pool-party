(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{36:function(e,t,a){e.exports=a(69)},41:function(e,t,a){},42:function(e,t,a){},63:function(e,t,a){},64:function(e,t,a){},66:function(e,t,a){},67:function(e,t,a){},68:function(e,t,a){},69:function(e,t,a){"use strict";a.r(t);var n,r=a(0),l=a.n(r),c=a(21),u=a.n(c),o=(a(41),a(42),a(14)),i=a(12),m=a(5),s=a(30),p=a.n(s).a.initializeApp({apiKey:"AIzaSyAyIdR5rJ6p-JX5BVMeoksBURFgAs5mD5U",authDomain:"pool-party-app.firebaseapp.com",databaseURL:"https://pool-party-app.firebaseio.com",projectId:"pool-party-app",storageBucket:"pool-party-app.appspot.com",messagingSenderId:"875916367186",appId:"1:875916367186:web:71a4c5d40ff62bda"}),d=function(e){return p.database().ref("players/".concat(e)).once("value").then(function(e){return e.val()})},f=a(4);!function(e){e.NOT_REQUESTED="NOT_REQUESTED",e.PENDING="PENDING",e.FULFILLED="FULFILLED"}(n||(n={}));var E=function(e){var t=e.status,a=e.players,c=e.fetchAllPlayers,u=Object(r.useState)(""),o=Object(m.a)(u,2),i=o[0],s=o[1];t===n.NOT_REQUESTED&&c();return l.a.createElement("div",{className:"Players"},l.a.createElement("h1",null,"Players"),l.a.createElement("input",{name:"name",value:i,onChange:function(e){s(e.currentTarget.value)},placeholder:"Player name"}),l.a.createElement("button",{onClick:function(){(function(e){var t=e.name,a=p.database().ref("players/").push();return a.set({id:a.key,name:t})})({name:i}).then(function(){c()}),s("")},disabled:i.length<1},"Add Player"),l.a.createElement("ul",null,a.map(function(e){var t=e.id,a=e.name;return l.a.createElement("li",{key:t},l.a.createElement(f.b,{to:"/players/".concat(t)},a))})))},y=a(25),v=a.n(y),b=function(e){return Object.keys(e).map(function(t){return e[t]})},h=function(e,t){return e.filter(function(e){return e.player1Id===t||e.player2Id===t})},I=function(e,t){var a=[];return h(t,e.id).forEach(function(t){var n=function(e,t){return t.player1Id===e.id?t.player2Id:t.player1Id}(e,t);a.indexOf(n)<0&&a.push(n)}),a},g=function(){return function(e){p.database().ref("players").once("value").then(function(e){return e.val()}).then(function(t){e(S(t))})}},O="PLAYERS.RECEIVE_ALL",S=function(e){return{type:O,payload:e}},j=Object(i.b)(function(e){return{players:b(e.players.byId),status:e.players.status}},function(e){return{fetchAllPlayers:function(){return e(g())}}})(E);var N=function(){return l.a.createElement("h1",null,"Home")};var w=function(e){var t=Object(r.useState)(""),a=Object(m.a)(t,2),n=a[0],l=a[1];return Object(r.useEffect)(function(){d(e).then(function(e){l(e.name)})},[e]),n},P=function(e){var t=e.id,a=w(t);return l.a.createElement(f.b,{to:"/players/".concat(t)},a)},A=a(32),G=function(){return p.database().ref("games").once("value").then(function(e){return e.val()})},T=(a(63),function(e){var t=e.fetchAllPlayers,a=e.onAddGame,c=e.status,u=e.players,o=Object(r.useState)("Player 1"),i=Object(m.a)(o,2),s=i[0],d=i[1],f=Object(r.useState)("Player 2"),E=Object(m.a)(f,2),y=E[0],v=E[1],b=Object(r.useState)(0),h=Object(m.a)(b,2),I=h[0],g=h[1],O=Object(r.useState)(0),S=Object(m.a)(O,2),j=S[0],N=S[1];c===n.NOT_REQUESTED&&t();var w="Player 1"!==s&&"Player 2"!==y?l.a.createElement("button",{className:"AddGame",onClick:function(){I&&j&&(function(e){var t=e.player1Id,a=e.player2Id,n=e.player1Score,r=e.player2Score,l=e.winnerId,c=p.database().ref("games/").push();c.set({time:A.database.ServerValue.TIMESTAMP,id:c.key,player1Id:t,player2Id:a,player1Score:n,player2Score:r,winnerId:l})}({player1Id:s,player2Id:y,player1Score:I,player2Score:j,winnerId:I>j?s:y}),g(0),N(0),d("Player 1"),v("Player 2"),a())}},"Add Game"):null;return l.a.createElement(l.a.Fragment,null,l.a.createElement("h2",null,"Add Game"),l.a.createElement("div",{className:"Forms"},l.a.createElement("div",null,l.a.createElement("h4",null,"Player 1"),l.a.createElement("form",null,l.a.createElement("select",{onChange:function(e){d(e.currentTarget.value)},value:s},l.a.createElement("option",{value:"Player 1",disabled:!0},"Select a player"),u.map(function(e){var t=e.id,a=e.name;return l.a.createElement("option",{key:t,value:t},a)})),l.a.createElement("label",null,"Score",l.a.createElement("input",{type:"number",value:I,max:17,min:0,onChange:function(e){return g(Number(e.currentTarget.value))}})))),l.a.createElement("div",null,l.a.createElement("h4",null,"Player 2"),l.a.createElement("form",null,l.a.createElement("select",{onChange:function(e){v(e.currentTarget.value)},value:y},l.a.createElement("option",{value:"Player 2",disabled:!0},"Select a player"),u.map(function(e){var t=e.id,a=e.name;return s!==t?l.a.createElement("option",{key:t,value:t},a):null})),l.a.createElement("label",null,"Score",l.a.createElement("input",{type:"number",value:j,max:17,min:0,onChange:function(e){return N(Number(e.currentTarget.value))}}))))),w)}),D=function(){return function(e){G().then(function(t){e(k(t))})}},L="GAMES.RECEIVE_ALL",k=function(e){return{type:L,payload:e}},R="GAMES.RECEIVE_N_GAMES",U=Object(i.b)(function(e){return{players:b(e.players.byId),status:e.players.status}},function(e){return{onAddGame:function(){return e(D())},fetchAllPlayers:function(){return e(g())}}})(T),x=(a(64),function(e){var t=e.date;return l.a.createElement("span",{style:{color:"lightslategray",fontSize:"12px",textTransform:"uppercase",letterSpacing:"0.1px"}},function(e){var t=new Date(e);return v()(t).startOf().fromNow()}(t))});var F=function(e){return e.status===n.NOT_REQUESTED&&e.fetchAllGames(),l.a.createElement("div",{className:"Games"},l.a.createElement("h1",null,"Games"),l.a.createElement(U,null),l.a.createElement("h2",null,"History"),l.a.createElement("ul",null,e.games.map(function(e){return l.a.createElement("li",{key:e.id,className:"Game"},l.a.createElement(f.b,{to:"/games/".concat(e.id)},l.a.createElement(x,{date:e.time})),l.a.createElement("div",null,l.a.createElement(P,{id:e.player1Id})," ",l.a.createElement("strong",null,e.player1Score)," vs"," ",l.a.createElement("strong",null,e.player2Score)," ",l.a.createElement(P,{id:e.player2Id})),l.a.createElement("div",null,"Winner:"," ",l.a.createElement("strong",null,l.a.createElement(P,{id:e.winnerId}))))})))},C=function(e){var t,a=b(e.games.byId);return(t=12,function(e){return e.slice(e.length-t,e.length).reverse()})(a)},M=Object(i.b)(function(e){return{games:C(e),status:e.games.status}},function(e){return{fetchAllGames:function(){return e(D())}}})(F),_=a(19),B=a.n(_),Q=a(26),V=(a(66),function(e){var t=e.player1Id,a=e.player2Id,n=e.games,r=function(e,t,a){return a.filter(function(a){return a.player1Id===e&&a.player2Id===t||a.player1Id===t&&a.player2Id===e})}(t,a,n),c=r.filter(function(e){return e.winnerId===t});return l.a.createElement("span",null,Math.round(c.length/r.length*100),"% (",r.length,")")}),W=function(e){var t=e.match,a=Object(r.useState)({id:"",name:""}),n=Object(m.a)(a,2),c=n[0],u=n[1],o=Object(r.useState)([]),i=Object(m.a)(o,2),s=i[0],p=i[1],E=Object(r.useState)([]),y=Object(m.a)(E,2),v=y[0],g=y[1],O=t.params.id,S=function(){var e=Object(Q.a)(B.a.mark(function e(){var t,a;return B.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,G();case 2:t=e.sent,a=b(t||[]).reverse(),p(a);case 6:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}(),j=function(){var e=Object(Q.a)(B.a.mark(function e(t,a){var n;return B.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,I(t,a);case 2:n=e.sent,g(b(n));case 4:case"end":return e.stop()}},e)}));return function(t,a){return e.apply(this,arguments)}}();Object(r.useEffect)(function(){S(),d(O).then(function(e){u(e),j(e,s)})},[O,s]);var N=h(s,O);return l.a.createElement("div",{className:"PlayerProfile"},l.a.createElement("h1",null,c.name),l.a.createElement("h2",null,"Win Rates"),l.a.createElement("div",null,v.map(function(e){return l.a.createElement("div",{className:"opponent"},l.a.createElement(P,{id:e})," - ",l.a.createElement(V,{player1Id:O,player2Id:e,games:s}))})),l.a.createElement("h2",null,"Games Played"),l.a.createElement("div",{className:"PlayerGames"},N.map(function(e){return l.a.createElement("div",{className:"PlayerGame",key:e.id},l.a.createElement(f.b,{to:"/games/".concat(e.id)},l.a.createElement(x,{date:e.time})),l.a.createElement("div",{className:"Content"},l.a.createElement("div",{className:"opponent"},"Opponent:"," ",e.player1Id===O?l.a.createElement(P,{id:e.player2Id}):l.a.createElement(P,{id:e.player1Id})),l.a.createElement("div",{className:"score"},e.winnerId===O?"\u2705":"\u274c",e.player1Score," - ",e.player2Score)))})))},Y=(a(67),function(e){var t=e.match,a=e.history,n=t.params.id,c=Object(r.useState)(),u=Object(m.a)(c,2),o=u[0],i=u[1];if(Object(r.useEffect)(function(){var e;(e=n,p.database().ref("games/".concat(e)).once("value").then(function(e){return e.val()})).then(function(e){i(e)})},[n]),!o)return null;var s=function(e){window.confirm("Delete Game?")&&function(e){return p.database().ref("games/".concat(e)).remove()}(e).then(function(){a.push("/games")})};return l.a.createElement("div",{className:"Game"},l.a.createElement("h1",null,"Game"),l.a.createElement("h4",{style:{marginBottom:10}},function(e){var t=new Date(e);return v()(t).format("MMMM Do, YYYY - h:mm a")}(o.time)),l.a.createElement("div",{style:{marginBottom:20}},l.a.createElement("span",{className:"remove",onClick:function(){return s(o.id)}},"Delete Game")),l.a.createElement(P,{id:o.player1Id}),l.a.createElement("h1",null,o.player1Score),l.a.createElement(P,{id:o.player2Id}),l.a.createElement("h1",null,o.player2Score))});var J=function(){return l.a.createElement(o.d,null,l.a.createElement(o.b,{exact:!0,path:"/",component:N}),l.a.createElement(o.b,{exact:!0,path:"/players",component:j}),l.a.createElement(o.b,{path:"/players/:id",component:W}),l.a.createElement(o.b,{exact:!0,path:"/games",component:M}),l.a.createElement(o.b,{path:"/games/:id",component:Y}),l.a.createElement(o.a,{to:"/"}))};a(68);var z=function(){return l.a.createElement("nav",{className:"Nav"},l.a.createElement("ul",null,l.a.createElement("li",null,l.a.createElement(f.b,{to:"/"},"Home")),l.a.createElement("li",null,l.a.createElement(f.b,{to:"/games"},"Games")),l.a.createElement("li",null,l.a.createElement(f.b,{to:"/players"},"Players"))))},H=a(11),K=a(34),X=a(13),$={status:n.NOT_REQUESTED,byId:{}};var q=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:$,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case R:return Object(X.a)({},e,{byId:Object(X.a)({},e.byId,t.payload),status:n.FULFILLED});case L:return Object(X.a)({},e,{byId:Object(X.a)({},t.payload),status:n.FULFILLED});default:return e}},Z={status:n.NOT_REQUESTED,byId:{}};var ee=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Z,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case O:return Object(X.a)({},e,{byId:Object(X.a)({},t.payload),status:n.FULFILLED});default:return e}},te=Object(H.combineReducers)({games:q,players:ee}),ae=a(35),ne=function(e){return Object(H.createStore)(te,e,Object(ae.composeWithDevTools)(Object(H.applyMiddleware)(K.a)))}({});var re=function(){return l.a.createElement(i.a,{store:ne},l.a.createElement(f.a,{basename:"/pool-party"},l.a.createElement("div",{className:"App"},l.a.createElement(z,null),l.a.createElement(J,null))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));u.a.render(l.a.createElement(re,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[36,1,2]]]);
//# sourceMappingURL=main.39faa730.chunk.js.map